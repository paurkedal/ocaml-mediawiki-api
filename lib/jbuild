(jbuild_version 1)

(library
 ((name mediawiki_api)
  (public_name mediawiki-api)
  (wrapped false)
  (modules
   (Mwapi
    Mwapi_common
    Mwapi_cookiejar
    Mwapi_lwt
    Mwapi_createaccount
    Mwapi_edit
    Mwapi_login
    Mwapi_parse
    Mwapi_query
    Mwapi_query_list
    Mwapi_query_prop
    Mwapi_query_prop_revisions
    ;; internal
    Mwapi_prereq))
  (preprocess (pps (ppx_compose lwt.ppx)))
  (libraries
   (calendar
    cohttp cohttp.lwt
    conduit conduit-lwt conduit-lwt-unix
    kojson
    ppx_compose
    prime
    ssl
    xdg-basedir
    yojson))))

(rule
 ((targets (mwapi.ml))
  (deps (mwapi.mli))
  (action (copy mwapi.mli mwapi.ml))))
